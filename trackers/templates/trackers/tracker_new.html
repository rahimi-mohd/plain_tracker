{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}New Tracker{% endblock %}

{% block main %}
<h2 class="my-4">Create New Tracker</h2>

<div class="card shadow-sm">
  <div class="card-body">
    <!-- IMPORTANT: add enctype for file upload -->
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- Main tracker form -->
      {{ form|crispy }}

      <!-- Image uploads -->
      <h5 class="mt-4">Upload Images</h5>
      {{ image_formset.management_form }}
      <div class="row">
        {% for image_form in image_formset %}
          <div class="col-md-4 mb-3">
            <div class="border rounded p-2">
              {{ image_form|crispy }}
            </div>
          </div>
        {% endfor %}
      </div>

      <!-- Buttons -->
      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="{% url 'tracker_list' %}" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
